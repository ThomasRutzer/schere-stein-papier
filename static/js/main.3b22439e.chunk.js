(this["webpackJsonpr3f-schere-stein-papier"]=this["webpackJsonpr3f-schere-stein-papier"]||[]).push([[0],{75:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var r,s=n(4),c=n(1),o=n.n(c),a=n(32),i=n.n(a),u=(n(75),n(31)),l=n(9),j=n(42),b=n(3),d=n(8),O=n(11),f=5e3,p=[0,9,0],m=[0,5,0],h=[.4,-7.5,0],g="SCISSOR",x="ROCK",E="PAPER",v="WILL_LOSE",y="OPPONENT",_="DRAW",C=(r={},Object(O.a)(r,g,{beats:E,loses:x}),Object(O.a)(r,E,{beats:x,loses:g}),Object(O.a)(r,x,{beats:g,loses:E}),r),R=function(){function e(){Object(b.a)(this,e)}return Object(d.a)(e,null,[{key:"getWinner",value:function(e,t){return e===t?_:e===v?y:C[e].beats===t?"YOU":y}}]),e}(),N=function(e){return e[Math.round(Math.random()*(e.length-1)+1)-1]},S=Object(j.a)((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,otherWon:0,youWon:0,currentPose:"CHALLENGING",sceneLoaded:!1,message:null,init:function(){return e((function(e){return{message:"Let's start"}}))},start:function(){return e((function(e){return{othersIsChoosing:!0,currentPose:"CHOOSING"}}))},reveal:function(){return e((function(e){return{message:"And the winner is\u2026"}}))},saveYours:function(t){return e((function(e){return{you:t,currentPose:"REVEAL_".concat(e.other)}}))},saveOther:function(){return e((function(e){return{other:N([x,g,E]),othersIsChoosing:!1,youAreChoosing:!0}}))},saveScore:function(){return e((function(e){var t=R.getWinner(e.you,e.other),n=t===_?"It's a tie":t===y?"Not you":"You";return{otherWon:t===y?e.otherWon+1:e.otherWon,youWon:"YOU"===t?e.youWon+1:e.youWon,message:n}}))},reset:function(){return e((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,message:null,currentPose:"CHALLENGING"}}))}}}));var k=function(){var e=Object(u.b)().progress,t=S((function(e){return e.init}));return Object(c.useEffect)((function(){100===e&&t()}),[t,e]),""},A=n(22),I=n(24),L=n(15),P=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/challenging.glb")),r=n.nodes,o=n.materials;Object(c.useEffect)((function(){t.current&&a()}),[t]);var a=function(){Object(L.a)({targets:t.current.position,keyframes:[{y:h[1]},{y:-6.2},{y:h[1],delay:300}],easing:"linear",duration:2e3})};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{position:h,children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:o.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},V=function(){return{in:function(e){return{targets:e.position,y:[p[1],m[1]]}},out:function(e){return{targets:e.position,y:p[1],delay:400}},settings:{duration:2400}}},W=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/paper.glb")),r=n.nodes,o=n.materials,a=V(t);Object(c.useEffect)((function(){t.current&&i()}),[t]);var i=function(){L.a.timeline({duration:a.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_PAPER")},complete:function(){return e.poseEnterComplete("REVEAL_PAPER")}}).add(a.in(t.current)).add(a.out(t.current))};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{rotation:[0,0,Math.PI],position:[0,p[1],0],scale:[1.5,1.5,1.5],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:o.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},M=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/rock.glb")),r=n.nodes,o=n.materials,a=V(t);Object(c.useEffect)((function(){t.current&&i()}),[t]);var i=function(){L.a.timeline({duration:a.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_ROCK")},complete:function(){return e.poseEnterComplete("REVEAL_ROCK")}}).add(a.in(t.current)).add(a.out(t.current))};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,p[1],0],rotation:[0,0,Math.PI],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:o.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},Y=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/scissor.glb")),r=n.nodes,o=n.materials,a=V();Object(c.useEffect)((function(){t.current&&i()}),[t]);var i=function(){L.a.timeline({duration:a.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_SCISSOR")},complete:function(){return e.poseEnterComplete("REVEAL_SCISSOR")}}).add(a.in(t.current)).add(a.out(t.current))};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({},e),{},{ref:t,position:[0,p[1],0],rotation:[0,0,Math.PI],scale:[1.5,1.5,1.5],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:o.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},G=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/choosing.glb")),r=n.nodes,o=n.materials;Object(c.useEffect)((function(){t.current&&a()}),[t]);var a=function(){L.a.timeline({easing:"easeOutExpo",duration:700,complete:function(){return e.poseEnterComplete("CHOOSING")}}).add({targets:t.current.position,y:[p[1],m[1]]}).add({targets:t.current.position,keyframes:[{x:0},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:0}]}).add({targets:t.current.position,y:p[1],delay:300})};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,p[1],0],rotation:[0,0,Math.PI],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:o.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},H=function(e){var t=e.poseEnterStart,n=e.poseEnterComplete,r=S();return function(){switch(r.currentPose){case"CHALLENGING":return Object(s.jsx)(P,{});case"CHOOSING":return Object(s.jsx)(G,{poseEnterComplete:n});case"REVEAL_ROCK":return Object(s.jsx)(M,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_SCISSOR":return Object(s.jsx)(Y,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_PAPER":return Object(s.jsx)(W,{poseEnterStart:t,poseEnterComplete:n})}}()};var w=function(){var e=S((function(e){return e.reset})),t=S((function(e){return e.reveal})),n=S((function(e){return e.saveScore})),r=S((function(e){return e.saveOther}));return Object(s.jsx)(c.Suspense,{fallback:Object(s.jsx)(k,{}),children:Object(s.jsx)(H,{poseEnterStart:function(e){"REVEAL_SCISSOR"!==e&&"REVEAL_PAPER"!==e&&"REVEAL_ROCK"!==e||t()},poseEnterComplete:function(t){"REVEAL_SCISSOR"!==t&&"REVEAL_PAPER"!==t&&"REVEAL_ROCK"!==t||(n(),e()),"CHOOSING"===t&&r()}})})},T=function(){var e=0,t=Object(l.h)().camera;return Object(l.f)((function(){t.position.x=.5*Math.cos(e),e+=.01})),""};var B=function(){return Object(s.jsxs)(l.a,{children:[Object(s.jsx)(T,{}),Object(s.jsx)("ambientLight",{}),Object(s.jsx)("pointLight",{position:[10,10,10]}),Object(s.jsx)(w,{})]})},K=n(10),D=n(67),F=n.n(D),Q=(n(87),function(e){var t=e.text,n=Object(c.useRef)(),r=Object(c.useState)(),o=Object(K.a)(r,2),a=o[0],i=o[1];return Object(c.useEffect)((function(){if(n.current&&t){var e=F.a.html({content:t,by:"chars"});i(e)}}),[t]),Object(c.useEffect)((function(){if(n.current&&a){var e=L.a.timeline({duration:900,easing:"easeInOutExpo"}),t=document.querySelectorAll(".char");e.add({targets:t,translateY:[20,0],opacity:[0,1],delay:L.a.stagger(100)}).add({targets:t,translateY:[0,-10],opacity:[1,0],delay:L.a.stagger(100,{start:200}),direction:"reverse"})}}),[a]),Object(s.jsx)("div",{ref:n,className:"message",dangerouslySetInnerHTML:{__html:a}})}),J=(n(88),n(89),function(){var e=Object(c.useRef)(),t=S((function(e){return e.start}));Object(c.useEffect)((function(){e.current&&Object(L.a)({targets:e.current,translateY:["250px",0],duration:1e3,delay:420,easing:"linear"})}),[e]);return Object(s.jsx)("button",{ref:e,className:"start-button",onClick:function(){Object(L.a)({targets:e.current,translateY:[0,"250px"],duration:300,easing:"easeInQuad",complete:t})},children:"Start"})}),U=(n(90),function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useState)(Date.now()),r=Object(K.a)(n,1)[0],o=S((function(e){return e.saveYours}));Object(c.useEffect)((function(){t.current&&Object(L.a)({targets:t.current.childNodes,translateY:[250,0],duration:1200,easing:"easeOutQuad",delay:L.a.stagger(100),begin:function(){S.setState({message:"Choose"})}})}),[t]),Object(c.useEffect)((function(){var t=f-Math.abs(Date.now()-r);return e.current=setTimeout((function(){o(v)}),t),function(){return clearTimeout(e.current)}}),[r,o]);var a=function(n){var r=n.target.value,s=Array.from(t.current.childNodes).filter((function(e){return!e.classList.contains("radio--".concat(r))}));Object(L.a)({targets:s,translateY:[0,250],duration:700,easing:"easeOutQuad",delay:L.a.stagger(50),complete:function(){clearTimeout(e.current),o(r)}})};return Object(s.jsxs)("div",{ref:t,className:"radios",children:[Object(s.jsx)("div",{className:"radio radio--".concat(g),children:Object(s.jsxs)("label",{className:"radio__item",children:[Object(s.jsxs)("span",{className:"radio__input",children:[Object(s.jsx)("input",{onChange:a,type:"radio",name:"you-select",value:g}),Object(s.jsx)("span",{className:"radio__control"})]}),Object(s.jsx)("span",{className:"radio__label",children:"Scissor \u270c\ufe0f"})]})}),Object(s.jsx)("div",{className:"radio radio--".concat(x),children:Object(s.jsxs)("label",{className:"radio__item",children:[Object(s.jsxs)("span",{className:"radio__input",children:[Object(s.jsx)("input",{onChange:a,type:"radio",name:"you-select",value:x}),Object(s.jsx)("span",{className:"radio__control"})]}),Object(s.jsx)("span",{className:"radio__label",children:"Rock \u270a"})]})}),Object(s.jsx)("div",{className:"radio radio--".concat(E),children:Object(s.jsxs)("label",{className:"radio__item",children:[Object(s.jsxs)("span",{className:"radio__input",children:[Object(s.jsx)("input",{onChange:a,type:"radio",name:"you-select",value:E}),Object(s.jsx)("span",{className:"radio__control"})]}),Object(s.jsx)("span",{className:"radio__label",children:"Paper \u270b"})]})})]})}),q=(n(91),function(e){var t=e.size,n=void 0===t?64:t,r=e.strokeWidth,o=void 0===r?8:r,a=Object(c.useRef)(),i=Object(c.useRef)(),u=Object(c.useRef)(),l=Object(c.useRef)(),j=n/2,b=n/2-o/2;return Object(c.useEffect)((function(){i.current&&l.current&&L.a.timeline({easing:"linear",duration:f}).add({targets:i.current,opacity:[0,1],duration:100}).add({targets:l.current,stroke:"#F74803",strokeDashoffset:[L.a.setDashoffset,0]})}),[i,l]),Object(c.useEffect)((function(){if(u.current)return Object(L.a)({targets:u.current,color:"#F74803",duration:4900,begin:function(){var e=5;u.current.innerText=e,a.current=setInterval((function(){e-=1,u.current.innerText=e}),1e3)},complete:function(){clearInterval(a)}}),function(){clearInterval(a.current)}}),[u,a]),Object(s.jsxs)("div",{className:"progress-bar",children:[Object(s.jsx)("svg",{ref:i,className:"progress-bar__svg",width:n,height:n,children:Object(s.jsx)("circle",{className:"progress-bar__circle-bg",ref:l,cx:j,cy:j,r:b,strokeWidth:o})}),Object(s.jsx)("p",{ref:u,className:"progress-bar__label"})]})}),z=function(){var e=S();return Object(s.jsxs)("div",{className:"your-controls",children:[!e.othersIsChoosing&&!e.youAreChoosing&&Object(s.jsx)(J,{}),e.youAreChoosing&&Object(s.jsxs)("div",{className:"your-controls__selection",children:[Object(s.jsx)("div",{className:"your-controls__progress-bar",children:!e.you&&Object(s.jsx)(q,{})}),Object(s.jsx)(U,{})]})]})},X=(n(92),function(){var e=S();return Object(s.jsxs)("div",{className:"score",children:[Object(s.jsx)("p",{className:"score__label",children:"Score"}),Object(s.jsxs)("p",{className:"score__label",children:["\ud83d\udc40",e.youWon,":",e.otherWon," \ud83d\udda5\ufe0f"]})]})}),Z=function(){var e=S();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(X,{}),Object(s.jsx)(z,{}),Object(s.jsx)(Q,{text:e.message})]})};u.a.preload("".concat("/schere-stein-papier","/models/challenging.glb")),u.a.preload("".concat("/schere-stein-papier","/models/choosing.glb")),u.a.preload("".concat("/schere-stein-papier","/models/paper.glb")),u.a.preload("".concat("/schere-stein-papier","/models/rock.glb")),u.a.preload("".concat("/schere-stein-papier","/models/scissor.glb"));var $=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Z,{}),Object(s.jsx)(B,{})]})};i.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)($,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.3b22439e.chunk.js.map
(this["webpackJsonpr3f-schere-stein-papier"]=this["webpackJsonpr3f-schere-stein-papier"]||[]).push([[0],{75:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var r,s=n(4),c=n(1),a=n.n(c),o=n(31),i=n.n(o),u=(n(75),n(9)),l=n(41),j=n(3),b=n(8),d=n(11),O=5e3,f=[0,9,0],p=[0,5,0],h=[.4,-7.5,0],m="SCISSOR",g="ROCK",x="PAPER",E="WILL_LOSE",v="OPPONENT",y="DRAW",_=(r={},Object(d.a)(r,m,{beats:x,loses:g}),Object(d.a)(r,x,{beats:g,loses:m}),Object(d.a)(r,g,{beats:m,loses:x}),r),C=function(){function e(){Object(j.a)(this,e)}return Object(b.a)(e,null,[{key:"getWinner",value:function(e,t){return e===t?y:e===E?v:_[e].beats===t?"YOU":v}}]),e}(),R=function(e){return e[Math.round(Math.random()*(e.length-1)+1)-1]},N=Object(l.a)((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,otherWon:0,youWon:0,currentPose:"CHALLENGING",sceneLoaded:!1,message:null,init:function(){return e((function(e){return{message:"Let's start"}}))},start:function(){return e((function(e){return{othersIsChoosing:!0,currentPose:"CHOOSING"}}))},reveal:function(){return e((function(e){return{message:"And the winner is\u2026"}}))},saveYours:function(t){return e((function(e){return{you:t,currentPose:"REVEAL_".concat(e.other)}}))},saveOther:function(){return e((function(e){return{other:R([g,m,x]),othersIsChoosing:!1,youAreChoosing:!0}}))},saveScore:function(){return e((function(e){var t=C.getWinner(e.you,e.other),n=t===y?"It's a tie":t===v?"Not you":"You";return{otherWon:t===v?e.otherWon+1:e.otherWon,youWon:"YOU"===t?e.youWon+1:e.youWon,message:n}}))},reset:function(){return e((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,message:null,currentPose:"CHALLENGING"}}))}}})),S=n(67);var k=function(){var e=Object(S.a)().progress,t=N((function(e){return e.init}));return Object(c.useEffect)((function(){100===e&&t()}),[t,e]),""},A=n(22),I=n(23),L=n(15);I.a.preload("".concat("/schere-stein-papier","/models/challenging.glb"));var P=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/challenging.glb")),r=n.nodes,a=n.materials;Object(c.useEffect)((function(){t.current&&o()}),[t]);var o=function(){Object(L.a)({targets:t.current.position,keyframes:[{y:h[1]},{y:-6.2},{y:h[1],delay:300}],easing:"linear",duration:2e3})};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{position:h,children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:a.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},V=function(){return{in:function(e){return{targets:e.position,y:[f[1],p[1]]}},out:function(e){return{targets:e.position,y:f[1],delay:400}},settings:{duration:2400}}};I.a.preload("".concat("/schere-stein-papier","/models/paper.glb"));var W=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/paper.glb")),r=n.nodes,a=n.materials,o=V(t);Object(c.useEffect)((function(){t.current&&i()}),[t]);var i=function(){L.a.timeline({duration:o.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_PAPER")},complete:function(){return e.poseEnterComplete("REVEAL_PAPER")}}).add(o.in(t.current)).add(o.out(t.current))};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{rotation:[0,0,Math.PI],position:[0,f[1],0],scale:[1.5,1.5,1.5],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:a.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))};I.a.preload("".concat("/schere-stein-papier","/models/rock.glb"));var M=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/rock.glb")),r=n.nodes,a=n.materials,o=V(t);Object(c.useEffect)((function(){t.current&&i()}),[t]);var i=function(){L.a.timeline({duration:o.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_ROCK")},complete:function(){return e.poseEnterComplete("REVEAL_ROCK")}}).add(o.in(t.current)).add(o.out(t.current))};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,f[1],0],rotation:[0,0,Math.PI],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:a.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))};I.a.preload("".concat("/schere-stein-papier","/models/scissor.glb"));var Y=function(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/scissor.glb")),r=n.nodes,a=n.materials,o=V();Object(c.useEffect)((function(){t.current&&i()}),[t]);var i=function(){L.a.timeline({duration:o.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_SCISSOR")},complete:function(){return e.poseEnterComplete("REVEAL_SCISSOR")}}).add(o.in(t.current)).add(o.out(t.current))};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({},e),{},{ref:t,position:[0,f[1],0],rotation:[0,0,Math.PI],scale:[1.5,1.5,1.5],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:a.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))};function G(e){var t=Object(c.useRef)(),n=Object(I.a)("".concat("/schere-stein-papier","/models/choosing.glb")),r=n.nodes,a=n.materials;Object(c.useEffect)((function(){t.current&&o()}),[t]);var o=function(){L.a.timeline({easing:"easeOutExpo",duration:700,complete:function(){return e.poseEnterComplete("CHOOSING")}}).add({targets:t.current.position,y:[f[1],p[1]]}).add({targets:t.current.position,keyframes:[{x:0},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:0}]}).add({targets:t.current.position,y:f[1],delay:300})};return Object(s.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,f[1],0],rotation:[0,0,Math.PI],children:[Object(s.jsx)("primitive",{object:r.Bone}),Object(s.jsx)("skinnedMesh",{material:a.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))}I.a.preload("".concat("/schere-stein-papier","/models/choosing.glb"));var H=function(e){var t=e.poseEnterStart,n=e.poseEnterComplete,r=N();return function(){switch(r.currentPose){case"CHALLENGING":return Object(s.jsx)(P,{});case"CHOOSING":return Object(s.jsx)(G,{poseEnterComplete:n});case"REVEAL_ROCK":return Object(s.jsx)(M,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_SCISSOR":return Object(s.jsx)(Y,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_PAPER":return Object(s.jsx)(W,{poseEnterStart:t,poseEnterComplete:n})}}()};var w=function(){var e=N((function(e){return e.reset})),t=N((function(e){return e.reveal})),n=N((function(e){return e.saveScore})),r=N((function(e){return e.saveOther}));return Object(s.jsx)(c.Suspense,{fallback:Object(s.jsx)(k,{}),children:Object(s.jsx)(H,{poseEnterStart:function(e){"REVEAL_SCISSOR"!==e&&"REVEAL_PAPER"!==e&&"REVEAL_ROCK"!==e||t()},poseEnterComplete:function(t){"REVEAL_SCISSOR"!==t&&"REVEAL_PAPER"!==t&&"REVEAL_ROCK"!==t||(n(),e()),"CHOOSING"===t&&r()}})})},B=function(){var e=0,t=Object(u.h)().camera;return Object(u.f)((function(){t.position.x=.5*Math.cos(e),e+=.01})),""};var K=function(){return Object(s.jsxs)(u.a,{children:[Object(s.jsx)(B,{}),Object(s.jsx)("ambientLight",{}),Object(s.jsx)("pointLight",{position:[10,10,10]}),Object(s.jsx)(w,{})]})},T=n(10),D=n(66),F=n.n(D),Q=(n(87),function(e){var t=e.text,n=Object(c.useRef)(),r=Object(c.useState)(),a=Object(T.a)(r,2),o=a[0],i=a[1];return Object(c.useEffect)((function(){if(n.current&&t){var e=F.a.html({content:t,by:"chars"});i(e)}}),[t]),Object(c.useEffect)((function(){if(n.current&&o){var e=L.a.timeline({duration:900,easing:"easeInOutExpo"}),t=document.querySelectorAll(".char");e.add({targets:t,translateY:[20,0],opacity:[0,1],delay:L.a.stagger(100)}).add({targets:t,translateY:[0,-10],opacity:[1,0],delay:L.a.stagger(100,{start:200}),direction:"reverse"})}}),[o]),Object(s.jsx)("div",{ref:n,className:"message",dangerouslySetInnerHTML:{__html:o}})}),J=(n(88),n(89),function(){var e=Object(c.useRef)(),t=N((function(e){return e.start}));Object(c.useEffect)((function(){e.current&&Object(L.a)({targets:e.current,translateY:["250px",0],duration:1e3,delay:420,easing:"linear"})}),[e]);return Object(s.jsx)("button",{ref:e,className:"start-button",onClick:function(){Object(L.a)({targets:e.current,translateY:[0,"250px"],duration:300,easing:"easeInQuad",complete:t})},children:"Start"})}),U=(n(90),function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useState)(Date.now()),r=Object(T.a)(n,1)[0],a=N((function(e){return e.saveYours}));Object(c.useEffect)((function(){t.current&&Object(L.a)({targets:t.current.childNodes,translateY:[250,0],duration:1200,easing:"easeOutQuad",delay:L.a.stagger(100),begin:function(){N.setState({message:"Choose"})}})}),[t]),Object(c.useEffect)((function(){var t=O-Math.abs(Date.now()-r);return e.current=setTimeout((function(){a(E)}),t),function(){return clearTimeout(e.current)}}),[r,a]);var o=function(e){var n=e.target.value,r=Array.from(t.current.childNodes).filter((function(e){return!e.classList.contains("radio--".concat(n))}));Object(L.a)({targets:r,translateY:[0,250],duration:700,easing:"easeOutQuad",delay:L.a.stagger(50),complete:function(){a(n)}})};return Object(s.jsxs)("div",{ref:t,className:"radios",children:[Object(s.jsx)("div",{className:"radio radio--".concat(m),children:Object(s.jsxs)("label",{className:"radio__item",children:[Object(s.jsxs)("span",{className:"radio__input",children:[Object(s.jsx)("input",{onChange:o,type:"radio",name:"you-select",value:m}),Object(s.jsx)("span",{className:"radio__control"})]}),Object(s.jsx)("span",{className:"radio__label",children:"Scissor \u270c\ufe0f"})]})}),Object(s.jsx)("div",{className:"radio radio--".concat(g),children:Object(s.jsxs)("label",{className:"radio__item",children:[Object(s.jsxs)("span",{className:"radio__input",children:[Object(s.jsx)("input",{onChange:o,type:"radio",name:"you-select",value:g}),Object(s.jsx)("span",{className:"radio__control"})]}),Object(s.jsx)("span",{className:"radio__label",children:"Rock \u270a"})]})}),Object(s.jsx)("div",{className:"radio radio--".concat(x),children:Object(s.jsxs)("label",{className:"radio__item",children:[Object(s.jsxs)("span",{className:"radio__input",children:[Object(s.jsx)("input",{onChange:o,type:"radio",name:"you-select",value:x}),Object(s.jsx)("span",{className:"radio__control"})]}),Object(s.jsx)("span",{className:"radio__label",children:"Paper \u270b"})]})})]})}),q=(n(91),function(e){var t=e.size,n=void 0===t?64:t,r=e.strokeWidth,a=void 0===r?8:r,o=Object(c.useRef)(),i=Object(c.useRef)(),u=Object(c.useRef)(),l=Object(c.useRef)(),j=n/2,b=n/2-a/2;return Object(c.useEffect)((function(){i.current&&l.current&&L.a.timeline({easing:"linear",duration:O}).add({targets:i.current,opacity:[0,1],duration:100}).add({targets:l.current,stroke:"#F74803",strokeDashoffset:[L.a.setDashoffset,0]})}),[i,l]),Object(c.useEffect)((function(){if(u.current)return Object(L.a)({targets:u.current,color:"#F74803",duration:4900,begin:function(){var e=5;u.current.innerText=e,o.current=setInterval((function(){e-=1,u.current.innerText=e}),1e3)},complete:function(){clearInterval(o)}}),function(){clearInterval(o.current)}}),[u,o]),Object(s.jsxs)("div",{className:"progress-bar",children:[Object(s.jsx)("svg",{ref:i,className:"progress-bar__svg",width:n,height:n,children:Object(s.jsx)("circle",{className:"progress-bar__circle-bg",ref:l,cx:j,cy:j,r:b,strokeWidth:a})}),Object(s.jsx)("p",{ref:u,className:"progress-bar__label"})]})}),z=function(){var e=N();return Object(s.jsxs)("div",{className:"your-controls",children:[!e.othersIsChoosing&&!e.youAreChoosing&&Object(s.jsx)(J,{}),e.youAreChoosing&&Object(s.jsxs)("div",{className:"your-controls__selection",children:[Object(s.jsx)("div",{className:"your-controls__progress-bar",children:!e.you&&Object(s.jsx)(q,{})}),Object(s.jsx)(U,{})]})]})},X=(n(92),function(){var e=N();return Object(s.jsxs)("div",{className:"score",children:[Object(s.jsx)("p",{className:"score__label",children:"Score"}),Object(s.jsxs)("p",{className:"score__label",children:["\ud83d\udc40",e.youWon,":",e.otherWon," \ud83d\udda5\ufe0f"]})]})}),Z=function(){var e=N();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(X,{}),Object(s.jsx)(z,{}),Object(s.jsx)(Q,{text:e.message})]})};var $=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Z,{}),Object(s.jsx)(K,{})]})};i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)($,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.697c1928.chunk.js.map
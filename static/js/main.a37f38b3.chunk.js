(this["webpackJsonpr3f-schere-stein-papier"]=this["webpackJsonpr3f-schere-stein-papier"]||[]).push([[0],{42:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r,s=n(2),c=n.n(s),o=n(32),a=n.n(o),i=(n(42),n(56)),u=n(16),l=n(25),j=n(0),b=n(5),d=n(10),O=5e3,f=[0,9,0],p=[0,5,0],m=[.4,-7.5,0],h="SCISSORS",g="ROCK",x="PAPER",E="WILL_LOSE",v="OPPONENT",y="DRAW",_=(r={},Object(d.a)(r,h,{beats:x,loses:g}),Object(d.a)(r,x,{beats:g,loses:h}),Object(d.a)(r,g,{beats:h,loses:x}),r),C=function(){function e(){Object(j.a)(this,e)}return Object(b.a)(e,null,[{key:"getWinner",value:function(e,t){return e===t?y:e===E?v:_[e].beats===t?"YOU":v}}]),e}(),R=function(e){return e[Math.round(Math.random()*(e.length-1)+1)-1]},S=Object(l.a)((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,otherWon:0,youWon:0,currentPose:"CHALLENGING",sceneLoaded:!1,message:null,init:function(){return e((function(e){return{message:"Let's start"}}))},start:function(){return e((function(e){return{othersIsChoosing:!0,currentPose:"CHOOSING"}}))},reveal:function(){return e((function(e){return{message:"And the winner is\u2026"}}))},saveYours:function(t){return e((function(e){return{you:t,currentPose:"REVEAL_".concat(e.other)}}))},saveOther:function(){return e((function(e){return{other:R([g,h,x]),othersIsChoosing:!1,youAreChoosing:!0}}))},saveScore:function(){return e((function(e){var t=C.getWinner(e.you,e.other),n=t===y?"It's a tie":t===v?"Not you":"You";return{otherWon:t===v?e.otherWon+1:e.otherWon,youWon:"YOU"===t?e.youWon+1:e.youWon,message:n}}))},reset:function(){return e((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,message:null,currentPose:"CHALLENGING"}}))}}})),N=n(55);var k=function(){var e=Object(N.a)().progress,t=S((function(e){return e.init}));return Object(s.useEffect)((function(){100===e&&t()}),[t,e]),""},A=n(9),I=n(11),L=n(6),P=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/challenging.glb")),r=n.nodes,c=n.materials;Object(s.useEffect)((function(){t.current&&o()}),[t]);var o=function(){Object(I.a)({targets:t.current.position,keyframes:[{y:m[1]},{y:-6.2},{y:m[1],delay:300}],easing:"linear",duration:2e3})};return Object(L.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{position:m,children:[Object(L.jsx)("primitive",{object:r.Bone}),Object(L.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},V=function(){return{in:function(e){return{targets:e.position,y:[f[1],p[1]]}},out:function(e){return{targets:e.position,y:f[1],delay:400}},settings:{duration:2400}}},W=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/paper.glb")),r=n.nodes,c=n.materials,o=V(t);Object(s.useEffect)((function(){t.current&&a()}),[t]);var a=function(){I.a.timeline({duration:o.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_PAPER")},complete:function(){return e.poseEnterComplete("REVEAL_PAPER")}}).add(o.in(t.current)).add(o.out(t.current))};return Object(L.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{rotation:[0,0,Math.PI],position:[0,f[1],0],scale:[1.5,1.5,1.5],children:[Object(L.jsx)("primitive",{object:r.Bone}),Object(L.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},M=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/rock.glb")),r=n.nodes,c=n.materials,o=V(t);Object(s.useEffect)((function(){t.current&&a()}),[t]);var a=function(){I.a.timeline({duration:o.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_ROCK")},complete:function(){return e.poseEnterComplete("REVEAL_ROCK")}}).add(o.in(t.current)).add(o.out(t.current))};return Object(L.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,f[1],0],rotation:[0,0,Math.PI],children:[Object(L.jsx)("primitive",{object:r.Bone}),Object(L.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},Y=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/scissors.glb")),r=n.nodes,c=n.materials,o=V();Object(s.useEffect)((function(){t.current&&a()}),[t]);var a=function(){I.a.timeline({duration:o.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_SCISSORS")},complete:function(){return e.poseEnterComplete("REVEAL_SCISSORS")}}).add(o.in(t.current)).add(o.out(t.current))};return Object(L.jsxs)("group",Object(A.a)(Object(A.a)({},e),{},{ref:t,position:[0,f[1],0],rotation:[0,0,Math.PI],scale:[1.5,1.5,1.5],children:[Object(L.jsx)("primitive",{object:r.Bone}),Object(L.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},G=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/choosing.glb")),r=n.nodes,c=n.materials;Object(s.useEffect)((function(){t.current&&o()}),[t]);var o=function(){I.a.timeline({easing:"easeOutExpo",duration:700,complete:function(){return e.poseEnterComplete("CHOOSING")}}).add({targets:t.current.position,y:[f[1],p[1]]}).add({targets:t.current.position,keyframes:[{x:0},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:0}]}).add({targets:t.current.position,y:f[1],delay:300})};return Object(L.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,f[1],0],rotation:[0,0,Math.PI],children:[Object(L.jsx)("primitive",{object:r.Bone}),Object(L.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},H=function(e){var t=e.poseEnterStart,n=e.poseEnterComplete,r=S();return function(){switch(r.currentPose){case"CHALLENGING":return Object(L.jsx)(P,{});case"CHOOSING":return Object(L.jsx)(G,{poseEnterComplete:n});case"REVEAL_ROCK":return Object(L.jsx)(M,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_SCISSORS":return Object(L.jsx)(Y,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_PAPER":return Object(L.jsx)(W,{poseEnterStart:t,poseEnterComplete:n})}}()};var w=function(){var e=S((function(e){return e.reset})),t=S((function(e){return e.reveal})),n=S((function(e){return e.saveScore})),r=S((function(e){return e.saveOther}));return Object(L.jsx)(s.Suspense,{fallback:Object(L.jsx)(k,{}),children:Object(L.jsx)(H,{poseEnterStart:function(e){"REVEAL_SCISSORS"!==e&&"REVEAL_PAPER"!==e&&"REVEAL_ROCK"!==e||t()},poseEnterComplete:function(t){"REVEAL_SCISSORS"!==t&&"REVEAL_PAPER"!==t&&"REVEAL_ROCK"!==t||(n(),e()),"CHOOSING"===t&&r()}})})},T=function(){var e=0,t=Object(u.d)().camera;return Object(u.b)((function(){t.position.x=.5*Math.cos(e),e+=.01})),""};var B=function(){return Object(L.jsxs)(u.a,{children:[Object(L.jsx)(T,{}),Object(L.jsx)("ambientLight",{}),Object(L.jsx)("pointLight",{position:[10,10,10]}),Object(L.jsx)(w,{})]})},K=n(12),D=n(38),F=n.n(D),Q=(n(48),function(e){var t=e.text,n=Object(s.useRef)(),r=Object(s.useState)(),c=Object(K.a)(r,2),o=c[0],a=c[1];return Object(s.useEffect)((function(){if(n.current&&t){var e=F.a.html({content:t,by:"chars"});a(e)}}),[t]),Object(s.useEffect)((function(){if(n.current&&o){var e=I.a.timeline({duration:900,easing:"easeInOutExpo"}),t=document.querySelectorAll(".char");e.add({targets:t,translateY:[20,0],opacity:[0,1],delay:I.a.stagger(100)}).add({targets:t,translateY:[0,-10],opacity:[1,0],delay:I.a.stagger(100,{start:200}),direction:"reverse"})}}),[o]),Object(L.jsx)("div",{ref:n,className:"message",dangerouslySetInnerHTML:{__html:o}})}),J=(n(49),n(50),function(){var e=Object(s.useRef)(),t=S((function(e){return e.start}));Object(s.useEffect)((function(){e.current&&Object(I.a)({targets:e.current,translateY:["250px",0],duration:1e3,delay:420,easing:"linear"})}),[e]);return Object(L.jsx)("button",{ref:e,className:"start-button",onClick:function(){Object(I.a)({targets:e.current,translateY:[0,"250px"],duration:300,easing:"easeInQuad",complete:t})},children:"Start"})}),U=(n(51),function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useState)(Date.now()),r=Object(K.a)(n,1)[0],c=S((function(e){return e.saveYours}));Object(s.useEffect)((function(){t.current&&Object(I.a)({targets:t.current.childNodes,translateY:[250,0],duration:1200,easing:"easeOutQuad",delay:I.a.stagger(100),begin:function(){S.setState({message:"Choose"})}})}),[t]),Object(s.useEffect)((function(){var n=O-Math.abs(Date.now()-r);return e.current=setTimeout((function(){var e=t.current.childNodes;a(e,(function(){c(E)}))}),n),function(){return clearTimeout(e.current)}}),[r,c]);var o=function(n){var r=n.target.value,s=Array.from(t.current.childNodes).filter((function(e){return!e.classList.contains("radio--".concat(r))}));a(s,(function(){clearTimeout(e.current),c(r)}))},a=Object(s.useCallback)((function(e,t){Object(I.a)({targets:e,translateY:[0,250],duration:700,easing:"easeOutQuad",delay:I.a.stagger(50),complete:t})}),[]);return Object(L.jsxs)("div",{ref:t,className:"radios",children:[Object(L.jsx)("div",{className:"radio radio--".concat(g),children:Object(L.jsxs)("label",{className:"radio__item",children:[Object(L.jsxs)("span",{className:"radio__input",children:[Object(L.jsx)("input",{onChange:o,type:"radio",name:"you-select",value:g}),Object(L.jsx)("span",{className:"radio__control"})]}),Object(L.jsx)("span",{className:"radio__label",children:"Rock \u270a"})]})}),Object(L.jsx)("div",{className:"radio radio--".concat(h),children:Object(L.jsxs)("label",{className:"radio__item",children:[Object(L.jsxs)("span",{className:"radio__input",children:[Object(L.jsx)("input",{onChange:o,type:"radio",name:"you-select",value:h}),Object(L.jsx)("span",{className:"radio__control"})]}),Object(L.jsx)("span",{className:"radio__label",children:"Scissors \u270c\ufe0f"})]})}),Object(L.jsx)("div",{className:"radio radio--".concat(x),children:Object(L.jsxs)("label",{className:"radio__item",children:[Object(L.jsxs)("span",{className:"radio__input",children:[Object(L.jsx)("input",{onChange:o,type:"radio",name:"you-select",value:x}),Object(L.jsx)("span",{className:"radio__control"})]}),Object(L.jsx)("span",{className:"radio__label",children:"Paper \u270b"})]})})]})}),q=(n(52),function(e){var t=e.size,n=void 0===t?64:t,r=e.strokeWidth,c=void 0===r?8:r,o=Object(s.useRef)(),a=Object(s.useRef)(),i=Object(s.useRef)(),u=Object(s.useRef)(),l=n/2,j=n/2-c/2;return Object(s.useEffect)((function(){a.current&&u.current&&I.a.timeline({easing:"linear",duration:O}).add({targets:a.current,opacity:[0,1],duration:100}).add({targets:u.current,stroke:"#F74803",strokeDashoffset:[I.a.setDashoffset,0]})}),[a,u]),Object(s.useEffect)((function(){if(i.current)return Object(I.a)({targets:i.current,color:"#F74803",duration:4900,begin:function(){var e=5;i.current.innerText=e,o.current=setInterval((function(){e-=1,i.current.innerText=e}),1e3)},complete:function(){clearInterval(o)}}),function(){clearInterval(o.current)}}),[i,o]),Object(L.jsxs)("div",{className:"progress-bar",children:[Object(L.jsx)("svg",{ref:a,className:"progress-bar__svg",width:n,height:n,children:Object(L.jsx)("circle",{className:"progress-bar__circle-bg",ref:u,cx:l,cy:l,r:j,strokeWidth:c})}),Object(L.jsx)("p",{ref:i,className:"progress-bar__label"})]})}),z=function(){var e=S();return Object(L.jsxs)("div",{className:"your-controls",children:[!e.othersIsChoosing&&!e.youAreChoosing&&Object(L.jsx)(J,{}),e.youAreChoosing&&Object(L.jsxs)("div",{className:"your-controls__selection",children:[Object(L.jsx)("div",{className:"your-controls__progress-bar",children:!e.you&&Object(L.jsx)(q,{})}),Object(L.jsx)(U,{})]})]})},X=(n(53),function(){var e=S();return Object(L.jsxs)("div",{className:"score",children:[Object(L.jsx)("p",{className:"score__label",children:"Score"}),Object(L.jsxs)("p",{className:"score__label",children:["\ud83d\udc40",e.youWon,":",e.otherWon," \ud83d\udda5\ufe0f"]})]})}),Z=function(){var e=S();return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(X,{}),Object(L.jsx)(z,{}),Object(L.jsx)(Q,{text:e.message})]})};i.a.preload("".concat("/schere-stein-papier","/models/challenging.glb")),i.a.preload("".concat("/schere-stein-papier","/models/choosing.glb")),i.a.preload("".concat("/schere-stein-papier","/models/paper.glb")),i.a.preload("".concat("/schere-stein-papier","/models/rock.glb")),i.a.preload("".concat("/schere-stein-papier","/models/scissors.glb"));var $=function(){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(Z,{}),Object(L.jsx)(B,{})]})};a.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)($,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.a37f38b3.chunk.js.map
(this["webpackJsonpr3f-schere-stein-papier"]=this["webpackJsonpr3f-schere-stein-papier"]||[]).push([[0],{43:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r,s=n(2),c=n.n(s),a=n(34),o=n.n(a),i=(n(43),n(57)),u=n(17),l=n(56),j=n(25),b=n(0),d=n(5),O=n(10),f=5e6,p=[0,9,0],m=[0,5,0],h=[.4,-7.5,0],g="SCISSORS",x="ROCK",E="PAPER",v="WILL_LOSE",y="OPPONENT",_="DRAW",C=(r={},Object(O.a)(r,g,{beats:E,loses:x}),Object(O.a)(r,E,{beats:x,loses:g}),Object(O.a)(r,x,{beats:g,loses:E}),r),R=function(){function e(){Object(b.a)(this,e)}return Object(d.a)(e,null,[{key:"getWinner",value:function(e,t){return e===t?_:e===v?y:C[e].beats===t?"YOU":y}}]),e}(),S=function(e){return e[Math.round(Math.random()*(e.length-1)+1)-1]},N=Object(j.a)((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,otherWon:0,youWon:0,currentPose:"",sceneLoaded:!1,message:null,initialized:!1,init:function(){return e((function(e){return{message:"Let's start",currentPose:"CHALLENGING",initialized:!0}}))},start:function(){return e((function(e){return{othersIsChoosing:!0,currentPose:"CHOOSING"}}))},reveal:function(){return e((function(e){return{message:"And the winner is\u2026"}}))},saveYours:function(t){return e((function(e){return{you:t,currentPose:"REVEAL_".concat(e.other)}}))},saveOther:function(){return e((function(e){return{other:S([x,g,E]),othersIsChoosing:!1,youAreChoosing:!0}}))},saveScore:function(){return e((function(e){var t=R.getWinner(e.you,e.other),n=t===_?"It's a tie":t===y?"Not you":"You";return{otherWon:t===y?e.otherWon+1:e.otherWon,youWon:"YOU"===t?e.youWon+1:e.youWon,message:n}}))},reset:function(){return e((function(e){return{you:null,other:null,othersIsChoosing:!1,youAreChoosing:!1,message:null,currentPose:"CHALLENGING"}}))}}}));var k=function(){var e=Object(l.a)().progress,t=N((function(e){return e.init}));return Object(s.useEffect)((function(){100===e&&t()}),[t,e]),""},A=n(9),L=n(11),I=n(6),P=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/challenging.glb")),r=n.nodes,c=n.materials;return Object(s.useEffect)((function(){Object(L.a)({targets:t.current.position,keyframes:[{y:h[1]},{y:-6.2},{y:h[1],delay:300}],easing:"linear",duration:2e3})}),[t]),Object(I.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{position:h,children:[Object(I.jsx)("primitive",{object:r.Bone}),Object(I.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},M=function(){return{in:function(e){return{targets:e.position,y:[p[1],m[1]]}},out:function(e){return{targets:e.position,y:p[1],delay:400}},settings:{duration:2400}}},V=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/paper.glb")),r=n.nodes,c=n.materials,a=M(t);Object(s.useEffect)((function(){t.current&&o()}),[t]);var o=function(){L.a.timeline({duration:a.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_PAPER")},complete:function(){return e.poseEnterComplete("REVEAL_PAPER")}}).add(a.in(t.current)).add(a.out(t.current))};return Object(I.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{rotation:[0,0,Math.PI],position:[0,p[1],0],scale:[1.5,1.5,1.5],children:[Object(I.jsx)("primitive",{object:r.Bone}),Object(I.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},W=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/rock.glb")),r=n.nodes,c=n.materials,a=M(t);Object(s.useEffect)((function(){t.current&&o()}),[t]);var o=function(){L.a.timeline({duration:a.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_ROCK")},complete:function(){return e.poseEnterComplete("REVEAL_ROCK")}}).add(a.in(t.current)).add(a.out(t.current))};return Object(I.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,p[1],0],rotation:[0,0,Math.PI],children:[Object(I.jsx)("primitive",{object:r.Bone}),Object(I.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},G=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/scissors.glb")),r=n.nodes,c=n.materials,a=M();Object(s.useEffect)((function(){t.current&&o()}),[t]);var o=function(){L.a.timeline({duration:a.settings.duration,begin:function(){return e.poseEnterStart("REVEAL_SCISSORS")},complete:function(){return e.poseEnterComplete("REVEAL_SCISSORS")}}).add(a.in(t.current)).add(a.out(t.current))};return Object(I.jsxs)("group",Object(A.a)(Object(A.a)({},e),{},{ref:t,position:[0,p[1],0],rotation:[0,0,Math.PI],scale:[1.5,1.5,1.5],children:[Object(I.jsx)("primitive",{object:r.Bone}),Object(I.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},w=function(e){var t=Object(s.useRef)(),n=Object(i.a)("".concat("/schere-stein-papier","/models/choosing.glb")),r=n.nodes,c=n.materials;Object(s.useEffect)((function(){t.current&&a()}),[t]);var a=function(){L.a.timeline({easing:"easeOutExpo",duration:700,complete:function(){return e.poseEnterComplete("CHOOSING")}}).add({targets:t.current.position,y:[p[1],m[1]]}).add({targets:t.current.position,keyframes:[{x:0},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:1},{x:-1},{x:0}]}).add({targets:t.current.position,y:p[1],delay:300})};return Object(I.jsxs)("group",Object(A.a)(Object(A.a)({ref:t},e),{},{scale:[1.5,1.5,1.5],position:[0,p[1],0],rotation:[0,0,Math.PI],children:[Object(I.jsx)("primitive",{object:r.Bone}),Object(I.jsx)("skinnedMesh",{material:c.skin,geometry:r.Cube.geometry,skeleton:r.Cube.skeleton})]}))},Y=function(e){var t=e.poseEnterStart,n=e.poseEnterComplete,r=N();return function(){switch(r.currentPose){case"CHALLENGING":return Object(I.jsx)(P,{});case"CHOOSING":return Object(I.jsx)(w,{poseEnterComplete:n});case"REVEAL_ROCK":return Object(I.jsx)(W,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_SCISSORS":return Object(I.jsx)(G,{poseEnterStart:t,poseEnterComplete:n});case"REVEAL_PAPER":return Object(I.jsx)(V,{poseEnterStart:t,poseEnterComplete:n})}}()};var H=function(){var e=N((function(e){return e.reset})),t=N((function(e){return e.reveal})),n=N((function(e){return e.saveScore})),r=N((function(e){return e.saveOther}));return Object(I.jsx)(s.Suspense,{fallback:null,children:Object(I.jsx)(Y,{poseEnterStart:function(e){"REVEAL_SCISSORS"!==e&&"REVEAL_PAPER"!==e&&"REVEAL_ROCK"!==e||t()},poseEnterComplete:function(t){"REVEAL_SCISSORS"!==t&&"REVEAL_PAPER"!==t&&"REVEAL_ROCK"!==t||(n(),e()),"CHOOSING"===t&&r()}})})},T=function(){var e=0,t=Object(u.d)().camera;return Object(u.b)((function(){t.position.x=.5*Math.cos(e),e+=.01})),""};var B=function(){var e=N((function(e){return e.initialized}));return Object(I.jsxs)(u.a,{gl:{antialias:window.devicePixelRatio<=1},pixelRatio:Math.min(window.devicePixelRatio,2),children:[Object(I.jsx)(k,{}),Object(I.jsx)(T,{}),Object(I.jsx)("ambientLight",{}),Object(I.jsx)("pointLight",{position:[10,10,10]}),e&&Object(I.jsx)(H,{})]})},K=n(12),D=n(39),z=n.n(D),F=(n(49),function(e){var t=e.text,n=Object(s.useRef)(),r=Object(s.useState)(),c=Object(K.a)(r,2),a=c[0],o=c[1];return Object(s.useEffect)((function(){if(n.current&&t){var e=z.a.html({content:t,by:"chars"});o(e)}}),[t]),Object(s.useEffect)((function(){if(n.current&&a){var e=L.a.timeline({duration:900,easing:"easeInOutExpo"}),t=document.querySelectorAll(".char");e.add({targets:t,translateY:[20,0],opacity:[0,1],delay:L.a.stagger(100)}).add({targets:t,translateY:[0,-10],opacity:[1,0],delay:L.a.stagger(100,{start:200}),direction:"reverse"})}}),[a]),Object(I.jsx)("div",{ref:n,className:"message",dangerouslySetInnerHTML:{__html:a}})}),Q=(n(50),n(51),function(){var e=Object(s.useRef)(),t=N((function(e){return e.start})),n=N((function(e){return e.currentPose}));Object(s.useEffect)((function(){"CHALLENGING"===n&&Object(L.a)({targets:e.current,translateY:["250px",0],duration:1e3,delay:420,easing:"linear"})}),[n]);return Object(I.jsxs)("button",{ref:e,className:"start-button",onClick:function(){Object(L.a)({targets:e.current,translateY:[0,"250px"],duration:300,easing:"easeInQuad",complete:t})},children:[Object(I.jsx)("span",{className:"start-button__back"}),Object(I.jsx)("span",{className:"start-button__front",children:"Start"})]})}),J=(n(52),function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),n=Object(s.useState)(Date.now()),r=Object(K.a)(n,1)[0],c=N((function(e){return e.saveYours}));Object(s.useEffect)((function(){t.current&&Object(L.a)({targets:t.current.childNodes,translateY:[250,0],duration:1200,easing:"easeOutQuad",delay:L.a.stagger(100),begin:function(){N.setState({message:"Choose"})}})}),[t]),Object(s.useEffect)((function(){var n=f-Math.abs(Date.now()-r);return e.current=setTimeout((function(){var e=t.current.childNodes;o(e,(function(){c(v)}))}),n),function(){return clearTimeout(e.current)}}),[r,c]);var a=function(n){var r=n.target.value,s=Array.from(t.current.childNodes).filter((function(e){return!e.classList.contains("radio--".concat(r))}));o(s,(function(){clearTimeout(e.current),c(r)}))},o=Object(s.useCallback)((function(e,t){Object(L.a)({targets:e,translateY:[0,250],duration:700,easing:"easeOutQuad",delay:L.a.stagger(50),complete:t})}),[]);return Object(I.jsxs)("div",{ref:t,className:"radios",children:[Object(I.jsxs)("div",{className:"radio radio--".concat(x),children:[Object(I.jsx)("span",{className:"radio__back"}),Object(I.jsxs)("label",{className:"radio__item",children:[Object(I.jsx)("input",{onChange:a,type:"radio",name:"you-select",value:x}),Object(I.jsx)("span",{className:"radio__control"}),Object(I.jsx)("span",{className:"radio__label",children:"Rock \u270a"})]})]}),Object(I.jsxs)("div",{className:"radio radio--".concat(g),children:[Object(I.jsx)("span",{className:"radio__back"}),Object(I.jsxs)("label",{className:"radio__item",children:[Object(I.jsx)("input",{onChange:a,type:"radio",name:"you-select",value:g}),Object(I.jsx)("span",{className:"radio__control"}),Object(I.jsx)("span",{className:"radio__label",children:"Scissors \u270c\ufe0f"})]})]}),Object(I.jsxs)("div",{className:"radio radio--".concat(E),children:[Object(I.jsx)("span",{className:"radio__back"}),Object(I.jsxs)("label",{className:"radio__item",children:[Object(I.jsx)("input",{onChange:a,type:"radio",name:"you-select",value:E}),Object(I.jsx)("span",{className:"radio__control"}),Object(I.jsx)("span",{className:"radio__label",children:"Paper \u270b"})]})]})]})}),U=(n(53),function(e){var t=e.size,n=void 0===t?64:t,r=e.strokeWidth,c=void 0===r?8:r,a=Object(s.useRef)(),o=Object(s.useRef)(),i=Object(s.useRef)(),u=Object(s.useRef)(),l=n/2,j=n/2-c/2;return Object(s.useEffect)((function(){o.current&&u.current&&L.a.timeline({easing:"linear",duration:f}).add({targets:o.current,opacity:[0,1],duration:100}).add({targets:u.current,stroke:"#F74803",strokeDashoffset:[L.a.setDashoffset,0]})}),[o,u]),Object(s.useEffect)((function(){if(i.current)return Object(L.a)({targets:i.current,color:"#F74803",duration:4999900,begin:function(){var e=5e3;i.current.innerText=e,a.current=setInterval((function(){e-=1,i.current.innerText=e}),1e3)},complete:function(){clearInterval(a)}}),function(){clearInterval(a.current)}}),[i,a]),Object(I.jsxs)("div",{className:"progress-bar",children:[Object(I.jsx)("svg",{ref:o,className:"progress-bar__svg",width:n,height:n,children:Object(I.jsx)("circle",{className:"progress-bar__circle-bg",ref:u,cx:l,cy:l,r:j,strokeWidth:c})}),Object(I.jsx)("p",{ref:i,className:"progress-bar__label"})]})}),q=function(){var e=N();return Object(I.jsxs)("div",{className:"your-controls",children:[!e.othersIsChoosing&&!e.youAreChoosing&&Object(I.jsx)(Q,{}),e.youAreChoosing&&Object(I.jsxs)("div",{className:"your-controls__selection",children:[Object(I.jsx)("div",{className:"your-controls__progress-bar",children:!e.you&&Object(I.jsx)(U,{})}),Object(I.jsx)(J,{})]})]})},X=(n(54),function(){var e=N();return Object(I.jsxs)("div",{className:"score",children:[Object(I.jsx)("p",{className:"score__label",children:"Score"}),Object(I.jsxs)("p",{className:"score__label",children:["\ud83d\udc40",e.youWon,":",e.otherWon," \ud83d\udda5\ufe0f"]})]})}),Z=function(){var e=N();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(X,{}),Object(I.jsx)(q,{}),Object(I.jsx)(F,{text:e.message})]})};i.a.preload("".concat("/schere-stein-papier","/models/challenging.glb")),i.a.preload("".concat("/schere-stein-papier","/models/choosing.glb")),i.a.preload("".concat("/schere-stein-papier","/models/paper.glb")),i.a.preload("".concat("/schere-stein-papier","/models/rock.glb")),i.a.preload("".concat("/schere-stein-papier","/models/scissors.glb"));var $=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Z,{}),Object(I.jsx)(B,{})]})};o.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)($,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.aaede125.chunk.js.map